<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="baidu-site-verification" content="093lY4ziMu" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="Tan&#39;s Blog">
    <meta name="keyword"  content="Hello world">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
    <title>
        
          项目实践 - 隧道大模型 - Tan&#39;s Blog
        
    </title>

    <link rel="canonical" href="https://master-tan.github.io/2024/09/24/项目实践 - 隧道大模型/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
        
<link rel="stylesheet" href="/css/dusign-light.css">

        
<link rel="stylesheet" href="/css/dusign-common-light.css">

        
<link rel="stylesheet" href="/css/font-awesome.css">

        
<link rel="stylesheet" href="/css/toc.css">

        <!-- background effects end -->
    
    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/fonts.googleapis.css">


    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- photography -->
    
<link rel="stylesheet" href="/css/photography.css">


    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('../../../../img/default.jpg')
                /*post*/
            
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                        </div>
                        <h1>项目实践 - 隧道大模型</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Tan on
                            2024-09-24
                        </span>

	       
                            <div class="blank_box"></div>
                            <span class="meta">
                                 <span class="post-count">12.4k</span> Words
                            </span>
                            <div class="blank_box"></div>
                            <!-- 不蒜子统计 start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- 不蒜子统计 end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Tan&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        	<li>
                          	  <a href="/about/">About Tan</a>
                        	</li>
                        
                    

                        
                        	<li>
                          	  <a href="/archive/">Archives</a>
                        	</li>
                        
                    

                        
                    

                        
                        	<li>
                          	  <a href="/tags/">Tags</a>
                        	</li>
                        
                    

                        
                    

                        
                    

                        
                    
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2 id="论文查询"><a href="#论文查询" class="headerlink" title="论文查询"></a>论文查询</h2><p>搜一些“盾构”相关的论文，比如知网的博士论文，高引用论文，谷歌学术高引用论文</p>
<h3 id="论文"><a href="#论文" class="headerlink" title="论文"></a>论文</h3><h4 id="盾构隧道施工与分析"><a href="#盾构隧道施工与分析" class="headerlink" title="盾构隧道施工与分析"></a>盾构隧道施工与分析</h4><ul>
<li><p>Three-dimensional numerical study of long-term settlement induced in shield tunneling<br>盾构隧道施工长期沉降三维数值研究<br><a href="https://doi.org/10.1016/j.tust.2019.02.021" target="_blank" rel="noopener">https://doi.org/10.1016/j.tust.2019.02.021</a></p>
<ul>
<li>使用PLAXIS 3D进行了一系列有限元分析</li>
<li>基于台北大众运输系统的典型盾构隧道案例。</li>
<li>评估了软土和硬化土的小应变模型对长期沉降的影响。</li>
<li>采用软土蠕变模型评估土壤蠕变行为对长期沉降的影响。</li>
<li>考虑土壤蠕变行为后，计算的沉降与现场测量数据相符；而不考虑蠕变时，计算的沉降明显低于现场测量。</li>
</ul>
</li>
<li><p>Present status and technology of shield tunneling method in Japan<br>日本盾构法施工的现状及技术<br><a href="https://doi.org/10.1016/S0886-7798(03)00040-3" target="_blank" rel="noopener">https://doi.org/10.1016/S0886-7798(03)00040-3</a></p>
<ul>
<li>日本在更严苛条件下建设隧道的需求增加，需开发新技术。</li>
<li>现有设计技术无法有效反映施工技术，传统方法仍被广泛使用。</li>
<li>强调盾构法在施工和设计之间的平衡进展，呼吁设计技术的创新。</li>
<li>概述当前盾构隧道技术、现场行为及设计改进的必要性。</li>
</ul>
</li>
<li><p>Shield tunneling and environment protection in Shanghai soft ground<br>上海软土地区盾构施工与环境保护<br><a href="https://doi.org/10.1016/j.tust.2008.12.005" target="_blank" rel="noopener">https://doi.org/10.1016/j.tust.2008.12.005</a></p>
<ul>
<li>地铁建设风险：关注大规模地铁建设对城市区域风险控制和环境保护的影响。</li>
<li>案例研究：分析三种方法：上方建筑穿越盾构（SCBA）、上方盾构隧道（SCTA）和下方盾构隧道（SCTB），基于上海软土的实际项目。</li>
<li>风险因素：研究与敏感建筑和现有地铁相关的风险，以及地面变形的预测。</li>
<li>控制措施：强调对地面体积损失比（GVLR）的严格规定和增强监测以降低建设风险的重要性。</li>
<li>盾构机性能：建议改善盾构机的灵活性和性能，以应对地质和环境挑战。</li>
</ul>
</li>
<li><p>Analysis of shield tunnel<br>盾构隧道分析<br><a href="https://doi.org/10.1002/nag.327" target="_blank" rel="noopener">https://doi.org/10.1002/nag.327</a></p>
<ul>
<li>提出了一种二维有限元模型，用于分析盾构隧道</li>
</ul>
</li>
<li><p>Shield Tunnel Construction in Centrifuge<br>离心机盾构隧道施工<br><a href="https://doi.org/10.1061/(ASCE)1090-0241(1999)125:4(289" target="_blank" rel="noopener">https://doi.org/10.1061/(ASCE)1090-0241(1999)125:4(289</a>)</p>
</li>
<li><p>Mechanical Behavior Monitoring and Load Inversion Analysis of Large-Diameter Underwater Shield Tunnel during Construction<br>大直径水下盾构隧道施工力学行为监测与荷载反演分析<br><a href="https://doi.org/10.3390/s24041310" target="_blank" rel="noopener">https://doi.org/10.3390/s24041310</a></p>
<ul>
<li>提出了基于贝叶斯-遗传算法的水土压力估算模型</li>
</ul>
</li>
<li><p>Effects of above-crossing tunnelling on the existing shield tunnels<br>上穿隧道对既有盾构隧道的影响<br><a href="https://doi.org/10.1016/j.tust.2016.05.002" target="_blank" rel="noopener">https://doi.org/10.1016/j.tust.2016.05.002</a></p>
<ul>
<li>提出了一种用于评估既有盾构隧道在上穿越施工过程中响应的简化分析方法。</li>
<li>既有盾构隧道被视为位于温克勒地基上的连续欧拉-伯努利梁。</li>
<li>采用两阶段分析方法来分析隧穿上方和隧穿之间的相互作用。</li>
<li>通过中国选定的三个案例验证了所提方法的适用性。</li>
</ul>
</li>
<li><p>Face Stability Analysis for a Shield Tunnel in Anisotropic Sands<br>各向异性砂土中盾构隧道开挖面稳定性分析<br><a href="https://doi.org/10.1061/(ASCE)GM.1943-5622.0001666" target="_blank" rel="noopener">https://doi.org/10.1061/(ASCE)GM.1943-5622.0001666</a></p>
</li>
<li><p>Dynamics research on grouping characteristics of a shield tunneling machine’s thrust system<br>盾构机推进系统分组特性动力学研究<br><a href="https://doi.org/10.1016/j.autcon.2016.12.004" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2016.12.004</a></p>
<ul>
<li>STM 分组方法及性能分析综述</li>
<li>建立盾构机推进系统动力学模型</li>
<li>混合土体中STM开挖过程切削荷载分析</li>
<li>比较不同分组类型中的推力系统的性能</li>
<li>提出一种选择最佳分组的方法</li>
</ul>
</li>
</ul>
<h4 id="AI在盾构隧道中的应用-—-Prediction"><a href="#AI在盾构隧道中的应用-—-Prediction" class="headerlink" title="AI在盾构隧道中的应用 — Prediction"></a>AI在盾构隧道中的应用 — Prediction</h4><ul>
<li><p>SBD-K-medoids-based long-term settlement analysis of shield tunnel<br>基于SBD-K-medoids的盾构隧道长期沉降分析<br><a href="https://doi.org/10.1016/j.trgeo.2023.101053" target="_blank" rel="noopener">https://doi.org/10.1016/j.trgeo.2023.101053</a></p>
<ul>
<li>提出了一种SBD-K-medoids聚类算法来加速聚类过程。</li>
<li>通过假设检验验证了所提算法的聚类精度和效率。</li>
<li>提出了盾构隧道运营期沉降分析的系统方法。</li>
<li>用新指标ITSS来描述盾构隧道的长期纵向沉降。</li>
<li>通过上海地铁10号线实例证明了该方法的合理性和工程实践价值。</li>
</ul>
</li>
<li><p>Deep learning technologies for shield tunneling: Challenges and opportunities<br>盾构隧道施工的深度学习技术：挑战与机遇<br><a href="https://doi.org/10.1016/j.autcon.2023.104982" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2023.104982</a></p>
<ul>
<li>对盾构隧道深度学习技术相关研究进行了严格审查和定性分析。</li>
<li>总结并列出了盾构隧道施工中典型的监测数据类型和三种主要应用场景。</li>
<li>分析了盾构隧道施工的深度学习模型的性能和相关挑战。</li>
<li>提出了盾构隧道深度学习模型针对现有挑战的未来研究机会。</li>
</ul>
</li>
<li><p>Modelling the performance of EPB shield tunnelling using machine and deep learning algorithms<br>使用机器和深度学习算法对 EPB 盾构隧道性能进行建模<br><a href="https://doi.org/10.1016/j.gsf.2021.101177" target="_blank" rel="noopener">https://doi.org/10.1016/j.gsf.2021.101177</a></p>
<ul>
<li>基于智能模型的集成框架。</li>
<li>关于前进速度的一个经验公式。</li>
<li>智能模型与实证方法的比较。</li>
<li>操作变量之间的敏感性分析。</li>
</ul>
</li>
<li><p>Prediction of Disc Cutter Life During Shield Tunneling with AI via the Incorporation of a Genetic Algorithm into a GMDH-Type Neural Network<br>通过将遗传算法融入 GMDH 型神经网络，利用人工智能预测盾构掘进过程中的盘式刀具寿命<br><a href="https://doi.org/10.1016/j.eng.2020.02.016" target="_blank" rel="noopener">https://doi.org/10.1016/j.eng.2020.02.016</a></p>
</li>
<li><p>Prediction of lining upward movement during shield tunneling using machine learning algorithms and field monitoring data<br>使用机器学习算法和现场监测数据预测盾构隧道施工期间衬砌向上移动<br><a href="https://doi.org/10.1016/j.trgeo.2023.101002" target="_blank" rel="noopener">https://doi.org/10.1016/j.trgeo.2023.101002</a></p>
</li>
<li><p>Dynamic prediction of mechanized shield tunneling performance<br>机械化盾构掘进性能的动态预测<br><a href="https://doi.org/10.1016/j.autcon.2021.103958" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2021.103958</a></p>
<ul>
<li>Bi-LSTM用于预测隧道掘进机的性能。</li>
<li>提出了一种动态调节模型来预测前进速度和扭矩。</li>
<li>对提出的动态调节模型进行了验证。</li>
</ul>
</li>
<li><p>A critical evaluation of machine learning and deep learning in shield-ground interaction prediction<br>机器学习与深度学习在盾构-地面相互作用预测中的批判性评估<br><a href="https://doi.org/10.1016/j.tust.2020.103593" target="_blank" rel="noopener">https://doi.org/10.1016/j.tust.2020.103593</a></p>
<ul>
<li>提出了从原始数据收集到基于AI算法的模型开发的标准流程图。</li>
<li>利用AI算法模拟盾构机与地面的相互作用。</li>
<li>研究机器学习和深度学习算法的应用范围。</li>
</ul>
</li>
<li><p>Predictive control of slurry pressure balance in shield tunneling using diagonal recurrent neural network and evolved particle swarm optimization<br>使用对角递归神经网络和进化粒子群优化算法对盾构隧道泥水压力平衡进行预测控制<br><a href="https://doi.org/10.1016/j.autcon.2019.102928" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2019.102928</a></p>
<ul>
<li>提出了一种盾构隧道施工泥水压力平衡的MPC系统。</li>
<li>分析了用于泥浆压力预测的DRNN的输入特征。</li>
<li>开发基于定期监督和变异的 PSO 来训练 DRNN。</li>
<li>建立了多步预测控制器及相关的抗延迟PSO。</li>
<li>MPC系统的性能在我国望京铁路隧道中得到验证。</li>
</ul>
</li>
<li><p>Dynamic prediction for attitude and position in shield tunneling: A deep learning method<br>盾构隧道施工姿态与位置动态预测：一种深度学习方法<br><a href="https://doi.org/10.1016/j.autcon.2019.102840" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2019.102840</a></p>
<ul>
<li>提出了一种盾构机姿态位置预测的新方法。</li>
<li>为预测任务构建了一个由小波变换、CNN 和 LSTM 组成的混合深度学习模型。</li>
<li>对国内最大跨江隧道现场数据进行检验。</li>
<li>并与其他三个模型进行了预测结果的比较及潜在的实用价值。</li>
</ul>
</li>
<li><p>Unsupervised spectral clustering for shield tunneling machine monitoring data with complex network theory<br>Unsupervised spectral clustering for shield tunneling machine monitoring data with complex network theory<br><a href="https://doi.org/10.1016/j.autcon.2019.102924" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2019.102924</a></p>
<ul>
<li>提出了一种对盾构机监测数据进行无监督分类的系统方法。</li>
<li>利用盾构机监测数据复杂的网络拓扑结构，构建谱聚类的相似度矩阵。</li>
<li>该方法在武汉地铁四号线越江盾构隧道工程中得到了验证。</li>
<li>分类结果对盾构隧道施工机械性能和地质风险评估具有潜在价值。</li>
</ul>
</li>
<li><p>Prediction of geological conditions for a tunnel boring machine using big operational data<br>利用大运行数据预测隧道掘进机的地质状况<br><a href="https://doi.org/10.1016/j.autcon.2018.12.022" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2018.12.022</a></p>
<ul>
<li>开发了一种基于大型 TBM 运行数据来检测、描述和预测地质条件的程序。</li>
<li>采用BIRCH算法对大操作数据进行压缩，以处理动态增长的流数据。</li>
<li>利用20%的运行数据训练的预测模型可以发现岩体类型，平均精度为84.4%。</li>
<li>设计了不同的训练和测试数据集来测试所开发程序的预测能力。</li>
</ul>
</li>
<li><p>A support vector regression model for predicting tunnel boring machine penetration rates<br>预测隧道掘进机穿透率的支持向量回归模型<br><a href="https://doi.org/10.1016/j.ijrmms.2014.09.012" target="_blank" rel="noopener">https://doi.org/10.1016/j.ijrmms.2014.09.012</a></p>
<ul>
<li>采用SVR算法预测TBM的掘进速度。</li>
<li>使用与皇后区隧道有关的真实数据集来测试所提出的模型。</li>
<li>同时考虑了岩石工程特性和机器特性。</li>
<li>渗透率的观测值与预测值之间的 R2 为0.95 。</li>
</ul>
</li>
<li><p>Prediction of geological conditions for a tunnel boring machine using big operational data<br>利用大运行数据预测隧道掘进机的地质状况<br><a href="https://doi.org/10.1016/j.autcon.2018.12.022" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2018.12.022</a></p>
<ul>
<li>开发了一种基于大型 TBM 运行数据来检测、描述和预测地质条件的程序。</li>
<li>采用BIRCH算法对大操作数据进行压缩，以处理动态增长的流数据。</li>
<li>利用20%的运行数据训练的预测模型可以发现岩体类型，平均精度为84.4%。</li>
<li>设计了不同的训练和测试数据集来测试所开发程序的预测能力。</li>
</ul>
</li>
<li><p>Advanced prediction of tunnel boring machine performance based on big data<br>基于大数据的隧道掘进机性能高级预测<br><a href="https://doi.org/10.1016/j.gsf.2020.02.011" target="_blank" rel="noopener">https://doi.org/10.1016/j.gsf.2020.02.011</a></p>
<ul>
<li>基于中国引黄—松水引水工程TBM施工大数据库开发的机器学习模型。</li>
<li>通过TBM掘进上升期的数据预测稳定期的总推力和刀盘扭矩。</li>
<li>TBM性能的变化优于经典的理论CSM模型。</li>
<li>讨论了数据效率和数据缺陷，并解决了最重要的参数。</li>
</ul>
</li>
<li><p>A case study of TBM performance prediction using a Chinese rock mass classification system – Hydropower Classification (HC) method<br>使用中国岩体分类系统进行 TBM 性能预测的案例研究 - 水电分类（HC）方法</p>
<ul>
<li>提高了撑靴式TBM现场贯入指数（FPI ）的计算精度。</li>
<li>基于中国岩体分类系统，开发了TBM性能预测的经验模型。</li>
<li>采用三种不同的多元回归分析方法来解决多重共线性问题。</li>
</ul>
</li>
<li><p>Recurrent neural networks for real-time prediction of TBM operating parameters<br>用于实时预测 TBM 运行参数的循环神经网络<br><a href="https://doi.org/10.1016/j.autcon.2018.11.013" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2018.11.013</a></p>
<ul>
<li>循环神经网络（RNN）用于开发 TBM 运行参数的实时预测。</li>
<li>基于现场数据，基于RNN的预测器可以生成下一周期TBM运行参数的预测值。</li>
<li>基于 RNN 的预测器在 TBM 运行参数的实时预测方面优于经典回归模型。</li>
</ul>
</li>
<li><p>Predictive control of slurry pressure balance in shield tunneling using diagonal recurrent neural network and evolved particle swarm optimization<br>使用对角递归神经网络和进化粒子群优化算法对盾构隧道泥水压力平衡进行预测控制<br><a href="https://doi.org/10.1016/j.autcon.2019.102928" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2019.102928</a></p>
<ul>
<li>提出了一种盾构隧道施工泥水压力平衡的MPC系统。</li>
<li>分析了用于泥浆压力预测的DRNN的输入特征。</li>
<li>开发基于定期监督和变异的 PSO 来训练 DRNN。</li>
<li>建立了多步预测控制器及相关的抗延迟PSO。</li>
<li>MPC系统的性能在我国望京铁路隧道中得到验证。</li>
</ul>
</li>
<li><p>Dynamic prediction for attitude and position in shield tunneling: A deep learning method<br>盾构隧道施工姿态与位置动态预测：一种深度学习方法<br><a href="https://doi.org/10.1016/j.autcon.2019.102840" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2019.102840</a></p>
<ul>
<li>提出了一种盾构机姿态位置预测的新方法。</li>
<li>为预测任务构建了一个由小波变换、CNN 和 LSTM 组成的混合深度学习模型。</li>
<li>对国内最大跨江隧道现场数据进行检验。</li>
<li>并与其他三个模型进行了预测结果的比较及潜在的实用价值。</li>
</ul>
</li>
<li><p>Unsupervised spectral clustering for shield tunneling machine monitoring data with complex network theory<br>基于复杂网络理论的盾构机监测数据的无监督谱聚类<br><a href="https://doi.org/10.1016/j.autcon.2019.102924" target="_blank" rel="noopener">https://doi.org/10.1016/j.autcon.2019.102924</a></p>
<ul>
<li>提出了一种对盾构机监测数据进行无监督分类的系统方法。</li>
<li>利用盾构机监测数据复杂的网络拓扑结构，构建谱聚类的相似度矩阵。</li>
<li>该方法在武汉地铁四号线越江盾构隧道工程中得到了验证。</li>
<li>分类结果对盾构隧道施工机械性能和地质风险评估具有潜在价值。</li>
</ul>
</li>
<li><p>A new fuzzy c-means clustering-based time series segmentation approach and its application on tunnel boring machine analysis<br>一种新的基于模糊 c 均值聚类的时间序列分割方法及其在隧道掘进机分析中的应用<br><a href="https://doi.org/10.1016/j.ymssp.2019.106279" target="_blank" rel="noopener">https://doi.org/10.1016/j.ymssp.2019.106279</a></p>
<ul>
<li>提出了一种基于模糊c均值算法的时间序列分割方法。</li>
<li>提出了一种决策方法来确定适当的段数。</li>
<li>所提出的方法在TBM时间序列中有着良好的应用前景。</li>
</ul>
</li>
<li><p>基于深度学习的超大直径盾构姿态预测研究<br><a href="https://doi.org/10.11817/j.issn.1672-7207.2024.04.019" target="_blank" rel="noopener">https://doi.org/10.11817/j.issn.1672-7207.2024.04.019</a></p>
</li>
<li><p>使用CNN(卷积神经网络)-LSTM(长短期记忆)联合神经网络预测盾构隧道施工引起的地面沉降<br><a href="http://dx.chinadoi.cn/10.16037/j.1007-869x.2024.06.031" target="_blank" rel="noopener">http://dx.chinadoi.cn/10.16037/j.1007-869x.2024.06.031</a></p>
</li>
</ul>
<hr>
<h2 id="PDF-提取文字-amp-图片"><a href="#PDF-提取文字-amp-图片" class="headerlink" title="PDF 提取文字 &amp; 图片"></a>PDF 提取文字 &amp; 图片</h2><h3 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h3><p>1.对于pdf标准文件，读取文字以及图片进行存储，但涉及到图片标题的提取或图附近文字的提取，就是最终目的是给图加描述便于语言大模型检索，比如有的图是有标题的那题目就能做为图的描述，或者没有标题的情况下需要上下文来描述这张图<br>2.对于图片形式的pdf，需要提取图中的文字和图</p>
<h3 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h3><p>使用PyMuPDF，给出对应能完成两点要求的完整项目代码。<br>对于以上两点的PDF，均在项目中的一个专门存放pdf的目录中.<br>项目程序首先：需要识别出每一个属于哪种PDF<br>对两类PDF进行对应要求的操作：</p>
<ul>
<li>对于pdf标准文件，读取文字以及图片进行存储</li>
<li>对于图片形式的pdf，需要使用OCR提取图中的文字和图<br>文字和图均结果存储在一个单独的目录中，并由输入的pdf名称决定输出的目录名称、项目、项目文件名称</li>
</ul>
<ul>
<li>pdf文件都是中英混合的</li>
</ul>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pdf_processor&#x2F;</span><br><span class="line">│</span><br><span class="line">├── input_pdfs&#x2F;          # 存放输入PDF文件</span><br><span class="line">│   ├── example_standard.pdf</span><br><span class="line">│   └── example_image.pdf</span><br><span class="line">│</span><br><span class="line">├── output&#x2F;              # 存放输出结果</span><br><span class="line">│</span><br><span class="line">├── 。。。.py     # 主程序</span><br><span class="line">├── 。。。.py     # 其他程序</span><br><span class="line">├── 。。。</span><br><span class="line">│</span><br><span class="line">└── requirements.txt     # 依赖文件</span><br></pre></td></tr></table></figure>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>图片型PDF要从中分辨出哪里是图片，哪里是文字，然后再进行文字识别，这个过程如何实现？图片的提取又如何实现？</p>
<ol>
<li>没有图就从上下文来描述这张图</li>
</ol>
<ul>
<li>思路：如果图片没有明确的标题，则使用图片附近的上下文文字生成图片描述。</li>
<li>对于每个页面的图片，提取页面中图片前后的文字（可以限制一定范围，比如图片前后 200 个字符），作为图片的上下文。</li>
<li>如果有明确的标题或文字说明，可以使用它们；否则，使用上下文信息生成图片的描述。</li>
</ul>
<ol>
<li>图片PDF的图片识别和截取</li>
</ol>
<ul>
<li>思路：图片形式的 PDF 通常每一页都是一整张图片，需要通过图像处理技术来识别出页面中的图片区域。对于这种情况，结合 pytesseract 提取文字，以及 OpenCV 等图像处理库进行图片的分割和保存。</li>
</ul>
<h3 id="调研进展汇报-PDF-文字与图片提取方法"><a href="#调研进展汇报-PDF-文字与图片提取方法" class="headerlink" title="调研进展汇报 - PDF 文字与图片提取方法"></a>调研进展汇报 - PDF 文字与图片提取方法</h3><p>我们目前对PDF文件的处理进行了初步调研，重点围绕如何从标准PDF和图片形式的PDF中提取文字和图片，并为图像添加适合大模型检索的描述。我们调研了以下几种方法，未来的处理方案也初步有了方向。</p>
<hr>
<h4 id="1-PDF标准文件的处理："><a href="#1-PDF标准文件的处理：" class="headerlink" title="1. PDF标准文件的处理："></a>1. <strong>PDF标准文件的处理</strong>：</h4><ul>
<li><p><strong>工具：PyMuPDF</strong><br>PyMuPDF 是一个非常高效的库，可以方便地从PDF中提取文字和图片。它能识别PDF页面中的各个元素（文字、图片、表格等），并支持从PDF的元数据中提取出每幅图片旁边的文本，用来生成图像的描述。</p>
</li>
<li><p><strong>思路：</strong></p>
<ul>
<li>通过PyMuPDF读取PDF内容，识别出每一张图片，并提取图片周围的文字作为其描述。</li>
<li>如果图片本身带有标题或说明，我们直接使用这些作为描述；否则，从上下文（图片前后文字）中生成描述。</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-图片形式的PDF处理："><a href="#2-图片形式的PDF处理：" class="headerlink" title="2. 图片形式的PDF处理："></a>2. <strong>图片形式的PDF处理</strong>：</h4><ul>
<li><p><strong>工具：Tesseract OCR + OpenCV</strong><br>对于扫描或图片形式的PDF，文本无法直接提取。这种情况下，我们使用Tesseract进行OCR（光学字符识别），将图像中的文字内容提取出来。OpenCV则用来检测和分割图片，确保能准确识别页面中的图片区域。</p>
</li>
<li><p><strong>思路：</strong></p>
<ul>
<li>首先通过图像处理技术识别出页面中的图片区域。</li>
<li>使用Tesseract提取图片中的文字，并将图片区域存储起来。</li>
<li>对识别出的文字和图片区域进行整理，结合上下文描述生成图像的详细描述。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="未来方向"><a href="#未来方向" class="headerlink" title="未来方向"></a>未来方向</h3><p>接下来的工作会基于初期调研，重点优化以下几个方面：</p>
<ul>
<li><strong>提高图片周围文字提取的准确性</strong>，特别是在混合中英文、公式的场景中。</li>
<li><strong>改进OCR技术在复杂PDF页面的表现</strong>，确保能更好地处理图片形式的PDF文件中的混合内容。</li>
</ul>
<h3 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h3><ul>
<li>Tesseract OCR 识别图片中的文字，但是图片中的文字可能是中文、英文、数字、符号等，且识别的准确率欠佳</li>
<li>公式无法识别</li>
<li>OpenCV可以提取图片型PDF中的图片，但是图片分割有时候有问题</li>
<li>表（table）无法提取，会被识别成文字</li>
<li>中文路径会导致各式各样的问题</li>
<li>效率：TesseractOCR ；准确率：PaddleOCR</li>
<li>识别双列形式图片型PDF期刊论文时，会将两列的文字识别成一列</li>
</ul>
<hr>
<h2 id="RAG（Retrieval-augmented-Generation，检索增强生成）"><a href="#RAG（Retrieval-augmented-Generation，检索增强生成）" class="headerlink" title="RAG（Retrieval-augmented Generation，检索增强生成）"></a>RAG（Retrieval-augmented Generation，检索增强生成）</h2><p>增强大模型对垂直领域的理解，解决大模型无法实时更新最新知识的问题</p>
<h3 id="只需要其中的检索-匹配步骤"><a href="#只需要其中的检索-匹配步骤" class="headerlink" title="只需要其中的检索/匹配步骤"></a>只需要其中的检索/匹配步骤</h3><p>在RAG模型中，使用神经检索器处理输入问题的具体步骤包括以下几个关键部分：</p>
<ul>
<li><p>输入问题的处理：将输入问题转换为向量表示，通常通过嵌入（embedding）层实现。</p>
</li>
<li><p>段落检索：利用神经检索器从非参数记忆（如维基百科索引）中找到与输入问题相关的段落。这通常涉及计算输入问题与存储段落之间的相似度。</p>
</li>
<li><p>输入序列的构建：将输入问题及其对应的检索段落组合在一起，形成一个完整的输入序列，用于后续的生成模型。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line">from transformers import AutoTokenizer, AutoModel</span><br><span class="line"></span><br><span class="line"># 初始化tokenizer和模型</span><br><span class="line">tokenizer &#x3D; AutoTokenizer.from_pretrained(&#39;bert-base-uncased&#39;)</span><br><span class="line">model &#x3D; AutoModel.from_pretrained(&#39;bert-base-uncased&#39;)</span><br><span class="line"></span><br><span class="line">def retrieve_paragraphs(query, memory_index, top_k&#x3D;5):</span><br><span class="line">    # 假设memory_index是一个段落列表</span><br><span class="line">    # 这里使用简化的相似度计算方式</span><br><span class="line">    query_embedding &#x3D; model(**tokenizer(query, return_tensors&#x3D;&#39;pt&#39;)).last_hidden_state.mean(dim&#x3D;1)</span><br><span class="line">    </span><br><span class="line">    # 计算与每个段落的相似度</span><br><span class="line">    similarities &#x3D; []</span><br><span class="line">    for paragraph in memory_index:</span><br><span class="line">        paragraph_embedding &#x3D; model(**tokenizer(paragraph, return_tensors&#x3D;&#39;pt&#39;)).last_hidden_state.mean(dim&#x3D;1)</span><br><span class="line">        similarity &#x3D; torch.cosine_similarity(query_embedding, paragraph_embedding)</span><br><span class="line">        similarities.append(similarity.item())</span><br><span class="line">    </span><br><span class="line">    # 返回top_k相似的段落</span><br><span class="line">    top_indices &#x3D; sorted(range(len(similarities)), key&#x3D;lambda i: similarities[i], reverse&#x3D;True)[:top_k]</span><br><span class="line">    return [memory_index[i] for i in top_indices]</span><br><span class="line"></span><br><span class="line">def combine_input(query, retrieved_paragraphs):</span><br><span class="line">    # 将问题与检索段落结合</span><br><span class="line">    combined_input &#x3D; f&quot;Question: &#123;query&#125;\nContext: &#123;&#39; &#39;.join(retrieved_paragraphs)&#125;&quot;</span><br><span class="line">    return combined_input</span><br><span class="line"></span><br><span class="line"># 示例用法</span><br><span class="line">input_question &#x3D; &quot;What is the capital of France?&quot;</span><br><span class="line">memory_index &#x3D; [</span><br><span class="line">    &quot;The capital of France is Paris.&quot;,</span><br><span class="line">    &quot;Berlin is the capital of Germany.&quot;,</span><br><span class="line">    &quot;Madrid is the capital of Spain.&quot;,</span><br><span class="line">    &quot;Rome is the capital of Italy.&quot;,</span><br><span class="line">    &quot;Lisbon is the capital of Portugal.&quot;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># 检索相关段落</span><br><span class="line">retrieved_paragraphs &#x3D; retrieve_paragraphs(input_question, memory_index)</span><br><span class="line"></span><br><span class="line"># 组合输入</span><br><span class="line">final_input &#x3D; combine_input(input_question, retrieved_paragraphs)</span><br><span class="line">print(final_input)</span><br></pre></td></tr></table></figure>
<p>代码说明：</p>
<ul>
<li><p>初始化模型和tokenizer：使用预训练的BERT模型来获取输入问题和段落的向量表示。</p>
</li>
<li><p>段落检索函数：retrieve_paragraphs函数计算输入问题与所有段落的相似度，并返回最相关的段落。</p>
</li>
<li><p>输入序列构建：combine_input函数将问题和检索到的段落结合成一个输入序列。</p>
</li>
</ul>
<p>非参数记忆：使用上述搜索的盾构论文进行构建</p>
<h2 id="部署-RAGFlow"><a href="#部署-RAGFlow" class="headerlink" title="部署 RAGFlow"></a>部署 RAGFlow</h2><h3 id="docker-换源"><a href="#docker-换源" class="headerlink" title="docker 换源"></a>docker 换源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>
<p>添加：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span> :</span><br><span class="line">  [</span><br><span class="line">  <span class="string">"https://docker.1ms.run"</span>,</span><br><span class="line">  <span class="string">"https://cjie.eu.org"</span>,</span><br><span class="line">  <span class="string">"https://docker.m.daocloud.io"</span>,</span><br><span class="line">  <span class="string">"https://noohub.ru"</span>,</span><br><span class="line">  <span class="string">"https://huecker.io"</span>,</span><br><span class="line">  <span class="string">"https://dockerhub.timeweb.cloud"</span>,</span><br><span class="line">  <span class="string">"https://docker.rainbond.cc"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>
<h3 id="安装python3-12"><a href="#安装python3-12" class="headerlink" title="安装python3.12"></a>安装python3.12</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装构建所需的依赖</span></span><br><span class="line">sudo apt install -y build-essential checkinstall</span><br><span class="line">sudo apt install -y libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载 Python 3.12 源码</span></span><br><span class="line">wget https://www.python.org/ftp/python/3.12.0/Python-3.12.0.tgz</span><br><span class="line">tar -xzf Python-3.12.0.tgz</span><br><span class="line"><span class="built_in">cd</span> Python-3.12.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译和安装</span></span><br><span class="line">./configure --<span class="built_in">enable</span>-optimizations</span><br><span class="line">make -j $(nproc)</span><br><span class="line">sudo make altinstall  <span class="comment"># 使用 altinstall 防止覆盖系统的 python 版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 Python 3.12 为默认版本</span></span><br><span class="line">sudo update-alternatives --install /usr/bin/python3 python3 /usr/<span class="built_in">local</span>/bin/python3.12 2</span><br><span class="line">sudo update-alternatives --config python3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把pip3.12设置为默认</span></span><br><span class="line">sudo update-alternatives --install /usr/bin/pip3 pip3 /usr/<span class="built_in">local</span>/bin/pip3.12 2</span><br><span class="line">sudo update-alternatives --config pip3</span><br></pre></td></tr></table></figure>
<h3 id="安装poerty"><a href="#安装poerty" class="headerlink" title="安装poerty"></a>安装poerty</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install -i https://pypi.tuna.tsinghua.edu.cn/simple poetry</span><br></pre></td></tr></table></figure>
<h4 id="poetry-安装环境"><a href="#poetry-安装环境" class="headerlink" title="poetry 安装环境"></a>poetry 安装环境</h4><p>~/.local/bin/poetry install —sync —no-root # install RAGFlow dependent python modules  作用：</p>
<p>命令 ~/.local/bin/poetry install —sync —no-root 的作用是使用 Poetry 工具来安装 Python 项目所需的依赖模块。具体来说，它的功能如下：</p>
<ul>
<li><p>安装依赖： Poetry 会根据项目根目录中的 pyproject.toml 文件中的依赖定义，自动安装所有所需的 Python 包。</p>
</li>
<li><p>—sync 选项： 使用 —sync 选项时，Poetry 将确保虚拟环境中的依赖与 pyproject.toml 和 poetry.lock 文件中的定义一致。如果有不一致的地方，Poetry 会进行同步，添加或删除依赖，以确保环境的一致性。</p>
</li>
<li><p>—no-root 选项： 使用 —no-root 选项意味着在安装依赖时不会安装当前项目本身（即不会将项目作为一个包安装）。这在你只想安装依赖而不需要将项目本身作为一个可安装的包时特别有用。</p>
</li>
</ul>
<h4 id="pyproject-toml-文件"><a href="#pyproject-toml-文件" class="headerlink" title="pyproject.toml 文件"></a>pyproject.toml 文件</h4><p>这是一个 pyproject.toml 文件的示例，它是 Poetry 工具用来管理 Python 项目的依赖和配置的主要文件。以下是每个部分的作用：</p>
<p><strong>[tool.poetry]</strong><br>这个部分定义了项目的基本信息。</p>
<ul>
<li>name: 项目的名称。</li>
<li>version: 项目的版本号。</li>
<li>description: 项目的描述，可以是一个简短的介绍。</li>
<li>authors: 项目的作者信息。</li>
<li>license: 项目使用的许可证，可以是链接或许可证名称。</li>
<li>readme: README 文件的路径，用于描述项目。</li>
<li>package-mode: 指定是否允许打包项目（通常在开发阶段设置为 false）。</li>
</ul>
<p><strong>[tool.poetry.dependencies]</strong><br>这个部分定义了项目的依赖关系。每一行表示一个依赖的包和它的版本要求。</p>
<p>python: 指定支持的 Python 版本范围，这里表示需要 Python 3.12 到 3.13 之间的版本。<br>其他依赖项（如 datrie, akshare 等）表示该项目所需的包和它们的版本限制。<br><strong>[tool.poetry.group.full]</strong><br>这个部分用于定义依赖组。可以将某些依赖项归为一组，以便在需要时安装。</p>
<p>optional: 表示该组依赖是可选的。<br><strong>[tool.poetry.group.full.dependencies]</strong><br>这个部分列出了属于 full 组的可选依赖项，这些通常是额外功能的依赖，比如深度学习或自然语言处理库（如 torch 和 transformers）。</p>
<p><strong>[build-system]</strong><br>这个部分定义了构建系统的信息。</p>
<p>requires: 指定构建项目所需的包，这里使用 poetry-core。<br>build-backend: 指定用于构建项目的后端，这里使用 poetry.core.masonry.api。</p>
<h4 id="添加清华源"><a href="#添加清华源" class="headerlink" title="添加清华源"></a>添加清华源</h4><p>法一：（实测有用）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pyproject.toml</span></span><br><span class="line"></span><br><span class="line">[[tool.poetry.source]]</span><br><span class="line">name = <span class="string">"mirrors"</span></span><br><span class="line">url = <span class="string">"https://pypi.tuna.tsinghua.edu.cn/simple/"</span></span><br><span class="line">priority = <span class="string">"primary"</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>name: 自定义源的名称。</li>
<li>url: 指定源的 URL。</li>
<li>primary: 如果设置为 true，Poetry 将在查找依赖时首先查找这个源。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry lock <span class="comment"># 更新依赖</span></span><br></pre></td></tr></table></figure>
<p>法二：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加自定义源</span></span><br><span class="line">~/.<span class="built_in">local</span>/bin/poetry config repositories.thu https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="comment"># 检查配置</span></span><br><span class="line">~/.<span class="built_in">local</span>/bin/poetry config --list</span><br><span class="line"><span class="comment"># 使用自定义源安装依赖</span></span><br><span class="line">~/.<span class="built_in">local</span>/bin/poetry install --sync --no-root</span><br></pre></td></tr></table></figure></p>
<p>法三：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry <span class="built_in">source</span> add --priority=default mirrors https://pypi.tuna.tsinghua.edu.cn/simple/</span><br></pre></td></tr></table></figure></p>
<h3 id="poetry-环境安装中遇到的问题"><a href="#poetry-环境安装中遇到的问题" class="headerlink" title="poetry 环境安装中遇到的问题"></a>poetry 环境安装中遇到的问题</h3><p>mini_racer-0.12.4 需要的 <a href="https://chromium.googlesource.com/chromium/tools/depot_tools.git/" target="_blank" rel="noopener">https://chromium.googlesource.com/chromium/tools/depot_tools.git/</a> 访问不了</p>
<p>解决方案：在 <a href="https://pypi.org/project/mini-racer/#files" target="_blank" rel="noopener">https://pypi.org/project/mini-racer/#files</a> 中下载 mini_racer-0.12.4-py3-none-manylinux_2_31_x86_64.whl 然后</p>
<p>然后运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poetry add ./mini_racer-0.12.4-py3-none-manylinux_2_31_x86_64.whl</span><br></pre></td></tr></table></figure></p>
<h3 id="无法访问huggingface-co"><a href="#无法访问huggingface-co" class="headerlink" title="无法访问huggingface.co"></a>无法访问huggingface.co</h3><p>国内镜像：<a href="https://hf-mirror.com" target="_blank" rel="noopener">https://hf-mirror.com</a><br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HF_ENDPOINT=https://hf-mirror.com</span><br></pre></td></tr></table></figure></p>
<h3 id="yml文件自动复制"><a href="#yml文件自动复制" class="headerlink" title="yml文件自动复制"></a>yml文件自动复制</h3><p>docker取消卷挂载</p>
<h3 id="后端端口报错"><a href="#后端端口报错" class="headerlink" title="后端端口报错"></a>后端端口报错</h3><p>./conf 和 ./docker 下的配置文件中的端口均需更改</p>
<h3 id="报错nltk无法download"><a href="#报错nltk无法download" class="headerlink" title="报错nltk无法download"></a>报错nltk无法download</h3><p>从<a href="https://github.com/nltk/nltk_data/tree/gh-pages/packages中下载zip包，解压到nltk_data的对应名字的目录下" target="_blank" rel="noopener">https://github.com/nltk/nltk_data/tree/gh-pages/packages中下载zip包，解压到nltk_data的对应名字的目录下</a></p>
<h3 id="报错没有redis："><a href="#报错没有redis：" class="headerlink" title="报错没有redis："></a>报错没有redis：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install redis</span><br></pre></td></tr></table></figure>
<h3 id="Q"><a href="#Q" class="headerlink" title="Q"></a>Q</h3><p>连不上外网 -&gt; 无法使用OpenAI的API： 能访问，联网问题而已</p>
<h3 id="项目结构-1"><a href="#项目结构-1" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── agent                          <span class="comment"># 代理相关组件，可能负责业务逻辑或智能代理的实现</span></span><br><span class="line">│   ├── component                  <span class="comment"># 代理的具体组件或模块</span></span><br><span class="line">│   ├── templates                  <span class="comment"># 模板，可能用于代理生成的内容</span></span><br><span class="line">│   └── test                       <span class="comment"># 测试相关</span></span><br><span class="line">│       └── dsl_examples           <span class="comment"># 可能是领域特定语言（DSL）的测试示例</span></span><br><span class="line"></span><br><span class="line">├── api                            <span class="comment"># API 服务相关</span></span><br><span class="line">│   ├── apps                       <span class="comment"># 应用程序相关</span></span><br><span class="line">│   │   ├── __pycache__            <span class="comment"># Python 编译缓存</span></span><br><span class="line">│   │   └── sdk                    <span class="comment"># SDK 相关的功能</span></span><br><span class="line">│   ├── db                         <span class="comment"># 数据库相关</span></span><br><span class="line">│   │   ├── __pycache__            <span class="comment"># 数据库模块的 Python 编译缓存</span></span><br><span class="line">│   │   └── services               <span class="comment"># 数据库服务相关代码</span></span><br><span class="line">│   ├── __pycache__                <span class="comment"># API 相关的 Python 编译缓存</span></span><br><span class="line">│   └── utils                      <span class="comment"># API 的工具函数</span></span><br><span class="line">│       └── __pycache__            <span class="comment"># 工具函数的 Python 编译缓存</span></span><br><span class="line"></span><br><span class="line">├── conf                           <span class="comment"># 配置文件，通常包含项目的全局设置</span></span><br><span class="line"></span><br><span class="line">├── deepdoc                        <span class="comment"># 深度文档处理相关功能</span></span><br><span class="line">│   ├── parser                     <span class="comment"># 解析器，可能涉及文本解析或结构化处理</span></span><br><span class="line">│   │   └── resume                 <span class="comment"># 简历解析相关</span></span><br><span class="line">│   │       └── entities           <span class="comment"># 简历实体处理</span></span><br><span class="line">│   │           └── res            <span class="comment"># 解析结果或相关资源</span></span><br><span class="line">│   └── vision                      <span class="comment"># 视觉相关模块，可能涉及图像处理</span></span><br><span class="line"></span><br><span class="line">├── docker                         <span class="comment"># Docker 配置文件及相关服务</span></span><br><span class="line">│   ├── nginx                      <span class="comment"># Nginx 配置相关</span></span><br><span class="line">│   └── ragflow-logs                <span class="comment"># 日志相关</span></span><br><span class="line">│       └── api                    <span class="comment"># 与 API 相关的日志</span></span><br><span class="line"></span><br><span class="line">├── docs                           <span class="comment"># 文档目录</span></span><br><span class="line">│   ├── guides                     <span class="comment"># 项目的使用指南或开发文档</span></span><br><span class="line">│   │   ├── agentic_rag            <span class="comment"># 关于 Agentic RAG 的指南</span></span><br><span class="line">│   │   └── develop                 <span class="comment"># 开发文档</span></span><br><span class="line">│   └── references                 <span class="comment"># 项目的参考资料</span></span><br><span class="line"></span><br><span class="line">├── graphrag                       <span class="comment"># 图形 RAG 相关模块</span></span><br><span class="line"></span><br><span class="line">├── intergrations                  <span class="comment"># 外部系统集成相关</span></span><br><span class="line">│   └── chatgpt-on-wechat          <span class="comment"># ChatGPT 和 WeChat 的集成模块</span></span><br><span class="line">│       └── plugins                <span class="comment"># 插件相关代码</span></span><br><span class="line"></span><br><span class="line">├── logs                           <span class="comment"># 日志目录，存储系统日志文件</span></span><br><span class="line">│   └── api                        <span class="comment"># 与 API 相关的日志</span></span><br><span class="line"></span><br><span class="line">├── rag                            <span class="comment"># RAG 核心模块</span></span><br><span class="line">│   ├── app                         <span class="comment"># 应用程序模块，包含 RAG 的核心应用代码</span></span><br><span class="line">│   ├── llm                         <span class="comment"># 大型语言模型（LLM）相关功能</span></span><br><span class="line">│   ├── nlp                         <span class="comment"># 自然语言处理相关功能</span></span><br><span class="line">│   ├── __pycache__                 <span class="comment"># RAG 核心模块的 Python 编译缓存</span></span><br><span class="line">│   ├── res                         <span class="comment"># RAG 相关的资源</span></span><br><span class="line">│   ├── svr                         <span class="comment"># 服务器相关功能</span></span><br><span class="line">│   └── utils                       <span class="comment"># 工具函数，辅助 RAG 核心功能</span></span><br><span class="line">│       └── __pycache__             <span class="comment"># 工具函数的 Python 编译缓存</span></span><br><span class="line"></span><br><span class="line">├── sdk                            <span class="comment"># 软件开发工具包（SDK）</span></span><br><span class="line">│   └── python                      <span class="comment"># Python SDK 相关</span></span><br><span class="line">│       ├── ragflow_sdk             <span class="comment"># ragflow SDK 的核心功能</span></span><br><span class="line">│       │   └── modules             <span class="comment"># SDK 模块</span></span><br><span class="line">│       └── test                    <span class="comment"># SDK 的测试</span></span><br><span class="line">│           └── test_data           <span class="comment"># 测试数据</span></span><br><span class="line"></span><br><span class="line">└── web                            <span class="comment"># Web 前端应用</span></span><br><span class="line">    ├── public                     <span class="comment"># 公共文件，包含静态资源</span></span><br><span class="line">    │   └── pdfjs-dist             <span class="comment"># 用于显示 PDF 文件的库</span></span><br><span class="line">    └── src                         <span class="comment"># 源代码目录</span></span><br><span class="line">        ├── assets                  <span class="comment"># 静态资源（如图片、图标等）</span></span><br><span class="line">        │   ├── inter               <span class="comment"># 中间件或交互性资源</span></span><br><span class="line">        │   └── svg                 <span class="comment"># SVG 图标</span></span><br><span class="line">        │       ├── chunk-method    <span class="comment"># 可能与分块方法相关的图标或资源</span></span><br><span class="line">        │       ├── file-icon       <span class="comment"># 文件图标</span></span><br><span class="line">        │       └── llm             <span class="comment"># 可能与 LLM 相关的图标或资源</span></span><br><span class="line">        ├── components               <span class="comment"># 前端组件库</span></span><br><span class="line">        │   ├── api-service         <span class="comment"># API 服务相关组件</span></span><br><span class="line">        │   │   ├── chat-api-key-modal <span class="comment"># Chat API 密钥弹窗</span></span><br><span class="line">        │   │   ├── chat-overview-modal <span class="comment"># 聊天概览弹窗</span></span><br><span class="line">        │   │   └── embed-modal     <span class="comment"># 嵌入式弹窗</span></span><br><span class="line">        │   ├── chunk-method-modal  <span class="comment"># 分块方法弹窗</span></span><br><span class="line">        │   ├── edit-tag            <span class="comment"># 编辑标签组件</span></span><br><span class="line">        │   ├── file-icon           <span class="comment"># 文件图标组件</span></span><br><span class="line">        │   ├── file-upload-modal   <span class="comment"># 文件上传弹窗</span></span><br><span class="line">        │   ├── highlight-markdown  <span class="comment"># Markdown 高亮组件</span></span><br><span class="line">        │   ├── image               <span class="comment"># 图像相关组件</span></span><br><span class="line">        │   ├── indented-tree       <span class="comment"># 缩进树形结构组件</span></span><br><span class="line">        │   ├── line-chart          <span class="comment"># 线形图组件</span></span><br><span class="line">        │   ├── llm-select          <span class="comment"># LLM 选择组件</span></span><br><span class="line">        │   ├── llm-setting-items   <span class="comment"># LLM 设置项组件</span></span><br><span class="line">        │   ├── message-input       <span class="comment"># 消息输入框组件</span></span><br><span class="line">        │   ├── message-item        <span class="comment"># 消息条目组件</span></span><br><span class="line">        │   ├── operate-dropdown    <span class="comment"># 操作下拉菜单组件</span></span><br><span class="line">        │   ├── parse-configuration <span class="comment"># 解析配置组件</span></span><br><span class="line">        │   ├── pdf-drawer          <span class="comment"># PDF 滑动抽屉组件</span></span><br><span class="line">        │   ├── pdf-previewer       <span class="comment"># PDF 预览组件</span></span><br><span class="line">        │   ├── rename-modal        <span class="comment"># 重命名弹窗</span></span><br><span class="line">        │   ├── retrieval-documents <span class="comment"># 检索文档组件</span></span><br><span class="line">        │   └── similarity-slider   <span class="comment"># 相似度滑块组件</span></span><br><span class="line">        ├── constants                <span class="comment"># 常量配置</span></span><br><span class="line">        ├── hooks                    <span class="comment"># React Hooks（可能是自定义 hooks）</span></span><br><span class="line">        ├── icons                    <span class="comment"># 图标库</span></span><br><span class="line">        ├── interfaces               <span class="comment"># 类型定义接口</span></span><br><span class="line">        │   ├── database             <span class="comment"># 数据库相关接口</span></span><br><span class="line">        │   └── request              <span class="comment"># 请求相关接口</span></span><br><span class="line">        ├── layouts                  <span class="comment"># 页面布局组件</span></span><br><span class="line">        │   └── components           <span class="comment"># 布局相关子组件</span></span><br><span class="line">        │       ├── header           <span class="comment"># 页眉组件</span></span><br><span class="line">        │       ├── right-toolbar    <span class="comment"># 右侧工具栏组件</span></span><br><span class="line">        │       └── user             <span class="comment"># 用户相关组件</span></span><br><span class="line">        ├── less                     <span class="comment"># LESS 样式表</span></span><br><span class="line">        ├── locales                  <span class="comment"># 本地化文件（如多语言支持）</span></span><br><span class="line">        ├── pages                    <span class="comment"># 页面组件</span></span><br><span class="line">        │   ├── add-knowledge        <span class="comment"># 添加知识页面</span></span><br><span class="line">        │   │   └── components       <span class="comment"># 页面内组件</span></span><br><span class="line">        │   ├── api                  <span class="comment"># API 页面</span></span><br><span class="line">        │   ├── chat                 <span class="comment"># 聊天页面</span></span><br><span class="line">        │   ├── document-viewer      <span class="comment"># 文档查看页面</span></span><br><span class="line">        │   ├── file-manager         <span class="comment"># 文件管理页面</span></span><br><span class="line">        │   ├── flow                 <span class="comment"># 流程页面</span></span><br><span class="line">        │   ├── force-graph          <span class="comment"># 强制图页面</span></span><br><span class="line">        │   ├── knowledge            <span class="comment"># 知识页面</span></span><br><span class="line">        │   ├── login                <span class="comment"># 登录页面</span></span><br><span class="line">        │   ├── search               <span class="comment"># 搜索页面</span></span><br><span class="line">        │   └── user-setting         <span class="comment"># 用户设置页面</span></span><br><span class="line">        ├── services                 <span class="comment"># 服务层代码</span></span><br><span class="line">        ├── theme                    <span class="comment"># 主题设置</span></span><br><span class="line">        ├── utils                    <span class="comment"># 工具函数</span></span><br><span class="line">        └── wrappers                 <span class="comment"># 高阶组件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── agent                          # 代理相关组件，可能负责业务逻辑或智能代理的实现</span><br><span class="line">│   ├── canvas.py                 # 与 Canvas 相关的代理</span><br><span class="line">│   ├── component                  # 代理的具体组件或模块</span><br><span class="line">│   │   ├── akshare.py           # A股数据代理</span><br><span class="line">│   │   ├── answer.py           # 答案代理</span><br><span class="line">│   │   ├── arxiv.py          # arXiv 代理</span><br><span class="line">│   │   ├── baidufanyi.py    # 百度翻译代理</span><br><span class="line">│   │   ├── baidu.py         # 百度搜索代理</span><br><span class="line">│   │   ├── base.py         # 代理基类</span><br><span class="line">│   │   ├── begin.py      # 开始代理</span><br><span class="line">│   │   ├── bing.py      # 必应搜索代理</span><br><span class="line">│   │   ├── categorize.py # 分类代理</span><br><span class="line">│   │   ├── cite.py     # 引用代理</span><br><span class="line">│   │   ├── concentrator.py # 聚合代理</span><br><span class="line">│   │   ├── crawler.py  # 爬虫代理</span><br><span class="line">│   │   ├── deepl.py  # DeepL 翻译代理</span><br><span class="line">│   │   ├── duckduckgo.py # DuckDuckGo 代理</span><br><span class="line">│   │   ├── exesql.py # SQL执行代理</span><br><span class="line">│   │   ├── generate.py # 生成代理</span><br><span class="line">│   │   ├── github.py # GitHub 代理</span><br><span class="line">│   │   ├── google.py # Google 代理</span><br><span class="line">│   │   ├── googlescholar.py # Google 学术代理</span><br><span class="line">│   │   ├── __init__.py # 代理模块的初始化文件</span><br><span class="line">│   │   ├── invoke.py # 调用代理</span><br><span class="line">│   │   ├── jin10.py # 进10代理</span><br><span class="line">│   │   ├── keyword.py # 关键词代理</span><br><span class="line">│   │   ├── message.py # 消息代理 </span><br><span class="line">│   │   ├── pubmed.py # PubMed 代理</span><br><span class="line">│   │   ├── qweather.py # 和风天气代理</span><br><span class="line">│   │   ├── relevant.py # 相关代理</span><br><span class="line">│   │   ├── retrieval.py # 检索代理</span><br><span class="line">│   │   ├── rewrite.py # 重写代理</span><br><span class="line">│   │   ├── switch.py # 切换代理 </span><br><span class="line">│   │   ├── tushare.py # Tushare 代理</span><br><span class="line">│   │   ├── wencai.py   </span><br><span class="line">│   │   ├── wikipedia.py # 维基百科代理</span><br><span class="line">│   │   └── yahoofinance.py # 雅虎金融代理</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── README.md</span><br><span class="line">│   ├── README_zh.md</span><br><span class="line">│   ├── settings.py  # 代理的设置</span><br><span class="line">│   ├── templates                  # 模板，可能用于代理生成的内容</span><br><span class="line">│   │   ├── customer_service.json # 客服模板</span><br><span class="line">│   │   ├── DB Assistant.json # 数据库助手模板</span><br><span class="line">│   │   ├── general_chat_bot.json # 通用聊天机器人模板</span><br><span class="line">│   │   ├── HR_callout_zh.json # 人力资源招聘模板</span><br><span class="line">│   │   ├── interpreter.json # 解释器模板</span><br><span class="line">│   │   ├── investment_advisor.json # 投资顾问模板</span><br><span class="line">│   │   ├── medical_consultation.json # 医疗咨询模板</span><br><span class="line">│   │   ├── text2sql.json # 文本转 SQL 模板</span><br><span class="line">│   │   └── websearch_assistant.json # 网页搜索助手模板</span><br><span class="line">│   └── test                       # 测试相关</span><br><span class="line">│       ├── client.py</span><br><span class="line">│       └── dsl_examples           # 领域特定语言（DSL）的测试示例</span><br><span class="line">│           ├── baidu_generate_and_switch.json</span><br><span class="line">│           ├── categorize.json</span><br><span class="line">│           ├── concentrator_message.json</span><br><span class="line">│           ├── customer_service.json</span><br><span class="line">│           ├── exesql.json</span><br><span class="line">│           ├── headhunter_zh.json</span><br><span class="line">│           ├── intergreper.json</span><br><span class="line">│           ├── interpreter.json</span><br><span class="line">│           ├── keyword_wikipedia_and_generate.json</span><br><span class="line">│           ├── retrieval_and_generate.json</span><br><span class="line">│           ├── retrieval_categorize_and_generate.json</span><br><span class="line">│           ├── retrieval_relevant_and_generate.json</span><br><span class="line">│           ├── retrieval_relevant_keyword_baidu_and_generate.json</span><br><span class="line">│           └── retrieval_relevant_rewrite_and_generate.json</span><br><span class="line"></span><br><span class="line">├── api                            # API 服务相关</span><br><span class="line">│   ├── apps                       # 应用程序相关</span><br><span class="line">│   │   ├── api_app.py            # API 应用程序</span><br><span class="line">│   │   ├── canvas_app.py        # Canvas 应用程序</span><br><span class="line">│   │   ├── chunk_app.py        # 分块应用程序 </span><br><span class="line">│   │   ├── conversation_app.py # 会话应用程序</span><br><span class="line">│   │   ├── dialog_app.py      # 对话应用程序</span><br><span class="line">│   │   ├── document_app.py</span><br><span class="line">│   │   ├── file2document_app.py</span><br><span class="line">│   │   ├── file_app.py</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   ├── kb_app.py</span><br><span class="line">│   │   ├── llm_app.py</span><br><span class="line">│   │   ├── __pycache__            # Python 编译缓存</span><br><span class="line">│   │   │   └── __init__.cpython-312.pyc</span><br><span class="line">│   │   ├── sdk                    # SDK 相关的功能</span><br><span class="line">│   │   │   ├── chat.py</span><br><span class="line">│   │   │   ├── dataset.py</span><br><span class="line">│   │   │   ├── dify_retrieval.py</span><br><span class="line">│   │   │   ├── doc.py</span><br><span class="line">│   │   │   └── session.py</span><br><span class="line">│   │   ├── system_app.py</span><br><span class="line">│   │   ├── tenant_app.py</span><br><span class="line">│   │   └── user_app.py</span><br><span class="line">│   ├── contants.py</span><br><span class="line">│   ├── db                         # 数据库相关</span><br><span class="line">│   │   ├── db_models.py </span><br><span class="line">│   │   ├── db_utils.py </span><br><span class="line">│   │   ├── init_data.py</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   ├── operatioins.py </span><br><span class="line">│   │   ├── reload_config_base.py</span><br><span class="line">│   │   ├── runtime_config.py</span><br><span class="line">│   │   ├── services               # 数据库服务相关代码</span><br><span class="line">│   │       ├── api_service.py </span><br><span class="line">│   │       ├── canvas_service.py</span><br><span class="line">│   │       ├── common_service.py</span><br><span class="line">│   │       ├── dialog_service.py</span><br><span class="line">│   │       ├── document_service.py</span><br><span class="line">│   │       ├── file2document_service.py</span><br><span class="line">│   │       ├── file_service.py</span><br><span class="line">│   │       ├── __init__.py</span><br><span class="line">│   │       ├── knowledgebase_service.py</span><br><span class="line">│   │       ├── llm_service.py </span><br><span class="line">│   │       ├── task_service.py </span><br><span class="line">│   │       └── user_service.py</span><br><span class="line">│   ├── http_api_reference.md     # HTTP API 参考文档</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── __pycache__                # API 相关的 Python 编译缓存</span><br><span class="line">│   ├── ragflow_server.py        # RAGFlow 服务器</span><br><span class="line">│   ├── settings.py               # API 的设置</span><br><span class="line">│   ├── utils                      # API 的工具函数</span><br><span class="line">│   │   ├── api_utils.py         # API 工具</span><br><span class="line">│   │   ├── commands.py          # 命令行工具</span><br><span class="line">│   │   ├── file_utils.py        # 文件工具</span><br><span class="line">│   │   ├── __init__.py          # 工具函数的初始化文件</span><br><span class="line">│   │   ├── log_utils.py         # 日志工具</span><br><span class="line">│   │   ├── t_crypt.py           # 加密工具</span><br><span class="line">│   │   └── web_utils.py      # Web 工具</span><br><span class="line">│   └── versions.py               # API 版本</span><br><span class="line"></span><br><span class="line">├── conf                           # 配置文件，通常包含项目的全局设置</span><br><span class="line">│   ├── llm_factories.json</span><br><span class="line">│   ├── mapping.json</span><br><span class="line">│   ├── private.pem</span><br><span class="line">│   ├── public.pem</span><br><span class="line">│   └── service_conf.yaml -&gt; ..&#x2F;docker&#x2F;service_conf.yaml</span><br><span class="line"></span><br><span class="line">├── CONTRIBUTING.md</span><br><span class="line"></span><br><span class="line">├── deepdoc                        # 深度文档处理相关功能</span><br><span class="line">│   ├── __init__.py              # 深度文档处理的初始化</span><br><span class="line">│   ├── parser                     # 解析器，可能涉及文本解析或结构化处理</span><br><span class="line">│   │   ├── docx_parser.py     # DOCX 解析器</span><br><span class="line">│   │   ├── excel_parser.py     # Excel 解析器</span><br><span class="line">│   │   ├── html_parser.py    # HTML 解析器</span><br><span class="line">│   │   ├── __init__.py          # 解析器的初始化</span><br><span class="line">│   │   ├── json_parser.py     # JSON 解析器</span><br><span class="line">│   │   ├── markdown_parser.py  # Markdown 解析器</span><br><span class="line">│   │   ├── pdf_parser.py      # PDF 解析器</span><br><span class="line">│   │   ├── ppt_parser.py      # PPT 解析器</span><br><span class="line">│   │   ├── resume                 # 简历解析相关</span><br><span class="line">│   │   │   ├── entities           # 简历实体处理</span><br><span class="line">│   │   │   │   ├── corporations.py  # 企业</span><br><span class="line">│   │   │   │   ├── degrees.py  # 学位</span><br><span class="line">│   │   │   │   ├── industries.py  # 行业</span><br><span class="line">│   │   │   │   ├── __init__.py    # 简历实体处理的初始化</span><br><span class="line">│   │   │   │   ├── regions.py     # 地区</span><br><span class="line">│   │           ├── res            # 解析结果或相关资源</span><br><span class="line">│   │   │   │   │   ├── corp_baike_len.csv # 企业百科长度</span><br><span class="line">│   │   │   │   │   ├── corp_tag.json # 企业标签</span><br><span class="line">│   │   │   │   │   ├── corp.tks.freq.json # 企业词频</span><br><span class="line">│   │   │   │   │   ├── good_corp.json # 好企业</span><br><span class="line">│   │   │   │   │   ├── good_sch.json # 好学校</span><br><span class="line">│   │   │   │   │   ├── school.rank.csv # 学校排名</span><br><span class="line">│   │   │   │   │   └── schools.csv   # 学校</span><br><span class="line">│   │   │   │   └── schools.py   # 学校实体处理</span><br><span class="line">│   │   │   ├── __init__.py      # 简历实体处理的初始化</span><br><span class="line">│   │   │   ├── step_one.py       # 简历解析第一步</span><br><span class="line">│   │   │   └── step_two.py        # 简历解析第二步</span><br><span class="line">│   │   ├── txt_parser.py     # 文本解析器</span><br><span class="line">│   │   └── utils.py            # 工具</span><br><span class="line">│   ├── README.md               # README</span><br><span class="line">│   ├── README_zh.md             # 中文版 README</span><br><span class="line">│   └── vision                      # 视觉相关模块，可能涉及图像处理</span><br><span class="line">│       ├── __init__.py           # 视觉模块的初始化</span><br><span class="line">│       ├── layout_recognizer.py  # 布局识别器</span><br><span class="line">│       ├── ocr.py             # OCR 相关</span><br><span class="line">│       ├── ocr.res             # OCR 相关资源</span><br><span class="line">│       ├── operators.py        # 操作符</span><br><span class="line">│       ├── postprocess.py      # 后处理</span><br><span class="line">│       ├── recognizer.py        # 图像识别器</span><br><span class="line">│       ├── seeit.py             # 图像处理</span><br><span class="line">│       ├── table_structure_recognizer.py  # 表格结构识别</span><br><span class="line">│       ├── t_ocr.py              # 文本识别</span><br><span class="line">│       └── t_recognizer.py          # 文本识别器</span><br><span class="line"></span><br><span class="line">├── docker                         # Docker 配置文件及相关服务</span><br><span class="line">│   ├── docker-compose-admin-tool.yml</span><br><span class="line">│   ├── docker-compose-base.yml</span><br><span class="line">│   ├── docker-compose-CN-oc9.yml</span><br><span class="line">│   ├── docker-compose-gpu-CN-oc9.yml</span><br><span class="line">│   ├── docker-compose-gpu.yml</span><br><span class="line">│   ├── docker-compose.yml</span><br><span class="line">│   ├── entrypoint.sh</span><br><span class="line">│   ├── init-kibana.sh</span><br><span class="line">│   ├── init.sql</span><br><span class="line">│   ├── launch_backend_service.sh</span><br><span class="line">│   ├── nginx                      # Nginx 配置相关</span><br><span class="line">│   └── ragflow-logs                # 日志相关</span><br><span class="line">│       └── api                    # 与 API 相关的日志</span><br><span class="line"></span><br><span class="line">├── Dockerfile</span><br><span class="line">├── Dockerfile.scratch.oc9</span><br><span class="line">├── Dockerfile.slim</span><br><span class="line"></span><br><span class="line">├── docs                           # 文档目录</span><br><span class="line">│   ├── guides                     # 项目的使用指南或开发文档</span><br><span class="line">│   │   ├── agentic_rag            # 关于 Agentic RAG 的指南</span><br><span class="line">│   │   └── develop                 # 开发文档</span><br><span class="line">│   └── references                 # 项目的参考资料</span><br><span class="line"></span><br><span class="line">├── download_deps.py</span><br><span class="line"></span><br><span class="line">├── graphrag                       # 图形 RAG 相关模块</span><br><span class="line">│   ├── claim_extractor.py        # 从文本中提取声明</span><br><span class="line">│   ├── claim_prompt.py          # 提示用户输入声明</span><br><span class="line">│   ├── community_report_prompt.py # 提示用户输入社区报告</span><br><span class="line">│   ├── community_reports_extractor.py # 从文本中提取社区报告</span><br><span class="line">│   ├── description_summary.py  # 描述摘要</span><br><span class="line">│   ├── entity_embedding.py     # 实体嵌入</span><br><span class="line">│   ├── entity_resolution_prompt.py # 提示用户输入实体解析</span><br><span class="line">│   ├── entity_resolution.py   # 实体解析</span><br><span class="line">│   ├── graph_extractor.py    # 图提取</span><br><span class="line">│   ├── graph_prompt.py    # 提示用户输入图</span><br><span class="line">│   ├── index.py          # 索引</span><br><span class="line">│   ├── leiden.py        # Leiden</span><br><span class="line">│   ├── mind_map_extractor.py # 从文本中提取思维导图</span><br><span class="line">│   ├── mind_map_prompt.py # 提示用户输入思维导图</span><br><span class="line">│   ├── search.py       # 搜索</span><br><span class="line">│   ├── smoke.py       # Smoke</span><br><span class="line">│   └── utils.py      # 工具</span><br><span class="line"></span><br><span class="line">├── intergrations                  # 外部系统集成相关</span><br><span class="line">│   └── chatgpt-on-wechat          # ChatGPT 和 WeChat 的集成模块</span><br><span class="line">│       └── plugins                # 插件相关代码</span><br><span class="line">│           ├── config.json</span><br><span class="line">│           ├── __init__.py</span><br><span class="line">│           ├── ragflow_chat.py</span><br><span class="line">│           ├── README.md</span><br><span class="line">│           └── requirements.txt</span><br><span class="line"></span><br><span class="line">├── logs                           # 日志目录，存储系统日志文件</span><br><span class="line">│   └── api                        # 与 API 相关的日志</span><br><span class="line"></span><br><span class="line">├── mini_racer-0.12.4-py3-none-manylinux_2_31_x86_64.whl</span><br><span class="line">├── poetry-installer-error-vgqnvurw.log</span><br><span class="line">├── poetry.lock</span><br><span class="line">├── poetry.toml</span><br><span class="line">├── printEnvironment.sh</span><br><span class="line">├── pyproject.toml</span><br><span class="line"></span><br><span class="line">├── rag                            # RAG 核心模块</span><br><span class="line">│   ├── app                        # 应用程序模块，包含 RAG 的核心应用代码</span><br><span class="line">│   │   ├── audio.py               # 音频处理</span><br><span class="line">│   │   ├── book.py                # 书籍处理</span><br><span class="line">│   │   ├── email.py               # 电子邮件处理</span><br><span class="line">│   │   ├── __init__.py            # RAG 核心模块的初始化</span><br><span class="line">│   │   ├── knowledge_graph.py     # 知识图谱</span><br><span class="line">│   │   ├── laws.py                # 处理不同文档类型，并产生分块</span><br><span class="line">│   │   ├── manual.py              # 手册处理</span><br><span class="line">│   │   ├── naive.py               # Naive RAG</span><br><span class="line">│   │   ├── one.py                 # One RAG</span><br><span class="line">│   │   ├── paper.py               # 论文处理</span><br><span class="line">│   │   ├── picture.py             # 图片处理</span><br><span class="line">│   │   ├── presentation.py        # 演示文稿处理</span><br><span class="line">│   │   ├── qa.py                  # 问答</span><br><span class="line">│   │   ├── resume.py              # 简历处理</span><br><span class="line">│   │   └── table.py               # 表格处理</span><br><span class="line">│   ├── benchmark.py              # RAG 的基准测试</span><br><span class="line">│   ├── __init__.py              # RAG 核心模块的初始化</span><br><span class="line">│   ├── llm                         # 大型语言模型（LLM）相关功能</span><br><span class="line">│   │   ├── chat_model.py</span><br><span class="line">│   │   ├── cv_model.py</span><br><span class="line">│   │   ├── embedding_model.py</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   ├── rerank_model.py</span><br><span class="line">│   │   ├── rpc_server.py</span><br><span class="line">│   │   ├── sequence2txt_model.py</span><br><span class="line">│   │   └── tts_model.py</span><br><span class="line">│   ├── nlp                         # 自然语言处理相关功能</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   ├── query.py</span><br><span class="line">│   │   ├── rag_tokenizer.py</span><br><span class="line">│   │   ├── search.py</span><br><span class="line">│   │   ├── surname.py</span><br><span class="line">│   │   ├── synonym.py</span><br><span class="line">│   │   └── term_weight.py</span><br><span class="line">│   ├── __pycache__                 # RAG 核心模块的 Python 编译缓存</span><br><span class="line">│   │   └── __init__.cpython-312.pyc</span><br><span class="line">│   ├── raptor.py</span><br><span class="line">│   │   ├── huqie.txt</span><br><span class="line">│   │   ├── ner.json</span><br><span class="line">│   │   └── synonym.json</span><br><span class="line">│   ├── settings.py</span><br><span class="line">│   ├── res                         # RAG 相关的资源</span><br><span class="line">│   │   ├── cache_file_svr.py</span><br><span class="line">│   │   ├── discord_svr.py</span><br><span class="line">│   │   ├── jina_server.py</span><br><span class="line">│   │   └── task_executor.py</span><br><span class="line">│   ├── svr                         # 服务器相关功能</span><br><span class="line">│   └── utils                       # 工具函数，辅助 RAG 核心功能</span><br><span class="line">│       ├── azure_sas_conn.py</span><br><span class="line">│       ├── azure_spn_conn.py</span><br><span class="line">│       ├── es_conn.py</span><br><span class="line">│       ├── __init__.py</span><br><span class="line">│       ├── minio_conn.py</span><br><span class="line">│       └── __pycache__             # 工具函数的 Python 编译缓存</span><br><span class="line">│       │   └── __init__.cpython-312.pyc</span><br><span class="line">│       ├── redis_conn.py</span><br><span class="line">│       ├── s3_conn.py</span><br><span class="line">│       └── storage_factory.py</span><br><span class="line"></span><br><span class="line">├── README_ja.md</span><br><span class="line">├── README_ko.md</span><br><span class="line">├── README.md</span><br><span class="line">├── README_zh.md</span><br><span class="line"></span><br><span class="line">├── sdk                            # 软件开发工具包（SDK）</span><br><span class="line">│   └── python                      # Python SDK 相关</span><br><span class="line">│       ├── ragflow_sdk             # ragflow SDK 的核心功能</span><br><span class="line">│       │   └── modules             # SDK 模块</span><br><span class="line">│       └── test                    # SDK 的测试</span><br><span class="line">│           └── test_data           # 测试数据</span><br><span class="line"></span><br><span class="line">└── web                            # Web 前端应用</span><br><span class="line">    ├── public                     # 公共文件，包含静态资源</span><br><span class="line">    │   └── pdfjs-dist             # 用于显示 PDF 文件的库</span><br><span class="line">    └── src                         # 源代码目录</span><br><span class="line">        ├── assets                  # 静态资源（如图片、图标等）</span><br><span class="line">        │   ├── inter               # 中间件或交互性资源</span><br><span class="line">        │   └── svg                 # SVG 图标</span><br><span class="line">        │       ├── chunk-method    # 可能与分块方法相关的图标或资源</span><br><span class="line">        │       ├── file-icon       # 文件图标</span><br><span class="line">        │       └── llm             # 可能与 LLM 相关的图标或资源</span><br><span class="line">        ├── components               # 前端组件库</span><br><span class="line">        │   ├── api-service         # API 服务相关组件</span><br><span class="line">        │   │   ├── chat-api-key-modal # Chat API 密钥弹窗</span><br><span class="line">        │   │   ├── chat-overview-modal # 聊天概览弹窗</span><br><span class="line">        │   │   └── embed-modal     # 嵌入式弹窗</span><br><span class="line">        │   ├── chunk-method-modal  # 分块方法弹窗</span><br><span class="line">        │   ├── edit-tag            # 编辑标签组件</span><br><span class="line">        │   ├── file-icon           # 文件图标组件</span><br><span class="line">        │   ├── file-upload-modal   # 文件上传弹窗</span><br><span class="line">        │   ├── highlight-markdown  # Markdown 高亮组件</span><br><span class="line">        │   ├── image               # 图像相关组件</span><br><span class="line">        │   ├── indented-tree       # 缩进树形结构组件</span><br><span class="line">        │   ├── line-chart          # 线形图组件</span><br><span class="line">        │   ├── llm-select          # LLM 选择组件</span><br><span class="line">        │   ├── llm-setting-items   # LLM 设置项组件</span><br><span class="line">        │   ├── message-input       # 消息输入框组件</span><br><span class="line">        │   ├── message-item        # 消息条目组件</span><br><span class="line">        │   ├── operate-dropdown    # 操作下拉菜单组件</span><br><span class="line">        │   ├── parse-configuration # 解析配置组件</span><br><span class="line">        │   ├── pdf-drawer          # PDF 滑动抽屉组件</span><br><span class="line">        │   ├── pdf-previewer       # PDF 预览组件</span><br><span class="line">        │   ├── rename-modal        # 重命名弹窗</span><br><span class="line">        │   ├── retrieval-documents # 检索文档组件</span><br><span class="line">        │   └── similarity-slider   # 相似度滑块组件</span><br><span class="line">        ├── constants                # 常量配置</span><br><span class="line">        ├── hooks                    # React Hooks（可能是自定义 hooks）</span><br><span class="line">        ├── icons                    # 图标库</span><br><span class="line">        ├── interfaces               # 类型定义接口</span><br><span class="line">        │   ├── database             # 数据库相关接口</span><br><span class="line">        │   └── request              # 请求相关接口</span><br><span class="line">        ├── layouts                  # 页面布局组件</span><br><span class="line">        │   └── components           # 布局相关子组件</span><br><span class="line">        │       ├── header           # 页眉组件</span><br><span class="line">        │       ├── right-toolbar    # 右侧工具栏组件</span><br><span class="line">        │       └── user             # 用户相关组件</span><br><span class="line">        ├── less                     # LESS 样式表</span><br><span class="line">        ├── locales                  # 本地化文件（如多语言支持）</span><br><span class="line">        ├── pages                    # 页面组件</span><br><span class="line">        │   ├── add-knowledge        # 添加知识页面</span><br><span class="line">        │   │   └── components       # 页面内组件</span><br><span class="line">        │   ├── api                  # API 页面</span><br><span class="line">        │   ├── chat                 # 聊天页面</span><br><span class="line">        │   │   ├── chat-configuration-modal   # 聊天配置弹窗</span><br><span class="line">        │   │   │   ├── assistant-setting.tsx  # 助手设置</span><br><span class="line">        │   │   │   ├── editable-cell.tsx    # 可编辑单元格</span><br><span class="line">        │   │   │   ├── index.less         # 样式表</span><br><span class="line">        │   │   │   ├── index.tsx        # 聊天配置弹窗</span><br><span class="line">        │   │   │   ├── model-setting.tsx  # 模型设置</span><br><span class="line">        │   │   │   └── prompt-engine.tsx  # 提示引擎</span><br><span class="line">        │   │   ├── chat-container      # 聊天容器</span><br><span class="line">        │   │   │   ├── index.less      # 样式表</span><br><span class="line">        │   │   │   └── index.tsx      # 聊天容器</span><br><span class="line">        │   │   ├── chat-id-modal     # 聊天 ID 弹窗</span><br><span class="line">        │   │   │   ├── index.less     # 样式表</span><br><span class="line">        │   │   │   └── index.tsx     # 聊天 ID 弹窗</span><br><span class="line">        │   │   ├── constants.ts        # 聊天页面常量</span><br><span class="line">        │   │   ├── context.ts         # 聊天页面上下文</span><br><span class="line">        │   │   ├── hooks.ts           # 聊天页面 hooks</span><br><span class="line">        │   │   ├── index.less        # 样式表</span><br><span class="line">        │   │   ├── index.tsx         # 聊天页面</span><br><span class="line">        │   │   ├── interface.ts # 聊天页面接口</span><br><span class="line">        │   │   ├── markdown-content # Markdown 内容</span><br><span class="line">        │   │   │   ├── index.less      # 样式表</span><br><span class="line">        │   │   │   └── index.tsx    # Markdown 内容</span><br><span class="line">        │   │   ├── share</span><br><span class="line">        │   │   │   ├── index.less       # 样式表</span><br><span class="line">        │   │   │   ├── index.tsx     # 共享组件</span><br><span class="line">        │   │   │   └── large.tsx       # 大型组件</span><br><span class="line">        │   │   ├── shared-hooks.ts    # 共享 hooks</span><br><span class="line">        │   │   └── utils.ts             #  聊天页面</span><br><span class="line">        │   ├── document-viewer      # 文档查看页面</span><br><span class="line">        │   ├── file-manager         # 文件管理页面</span><br><span class="line">        │   ├── flow                 # 流程页面</span><br><span class="line">        │   ├── force-graph          # 强制图页面</span><br><span class="line">        │   ├── knowledge            # 知识页面</span><br><span class="line">        │   ├── login                # 登录页面</span><br><span class="line">        │   ├── search               # 搜索页面</span><br><span class="line">        │   └── user-setting         # 用户设置页面</span><br><span class="line">        ├── services                 # 服务层代码</span><br><span class="line">        ├── theme                    # 主题设置</span><br><span class="line">        ├── utils                    # 工具函数</span><br><span class="line">        └── wrappers                 # 高阶组件</span><br></pre></td></tr></table></figure>
<h2 id="业务修改流程"><a href="#业务修改流程" class="headerlink" title="业务修改流程"></a>业务修改流程</h2><ol>
<li>业务需求  -&gt;  需要在搜索界面加上对应的关联分块</li>
<li>后端定位<ul>
<li>底层功能位于模块：<code>rag</code> -&gt; <code>app</code> -&gt; <code>laws.py</code></li>
<li>业务功能位于模块：<code>agent</code> -&gt; <code>component</code> -&gt; <code>retrieval.py</code></li>
</ul>
</li>
<li>前端定位<ul>
<li>前端功能位于模块：<code>web</code> -&gt; <code>src</code> -&gt; <code>pages</code> -&gt; <code>search</code> -&gt; <code>Search.tsx</code></li>
<li>前端组件位于模块：<code>web</code> -&gt; <code>src</code> -&gt; <code>components</code> -&gt; <code>retrieval-documents</code> -&gt; <code>RetrievalDocuments.tsx</code></li>
</ul>
</li>
</ol>
<h3 id="一次搜索（Search）"><a href="#一次搜索（Search）" class="headerlink" title="一次搜索（Search）"></a>一次搜索（Search）</h3><p>[INFO] [2024-11-28 03:14:58,074] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-c40a288b0e9cc26a11fee58744f1df42 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:58,089] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/user/info HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:58,090] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-b6b54a6e86b8309ed1ac072f9674733f HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:58,090] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-79ec52e0ad0bca20a1ef9fd052f72829 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:58,092] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2b1b2d628b8ff9f553b2fe2aebe66821 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:58,094] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2332919d98b45e91e670d3e57f2423da HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:58,098] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/kb/list HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:58,104] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:58] “GET /v1/document/thumbnails?doc_ids=d3f5da08acf111efa6b1fc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,454] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “POST /v1/chunk/retrieval_test HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,595] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-79ec52e0ad0bca20a1ef9fd052f72829 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,595] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-b6b54a6e86b8309ed1ac072f9674733f HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,596] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-c40a288b0e9cc26a11fee58744f1df42 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,598] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-2332919d98b45e91e670d3e57f2423da HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,635] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-c40a288b0e9cc26a11fee58744f1df42 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,650] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2332919d98b45e91e670d3e57f2423da HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,652] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-b6b54a6e86b8309ed1ac072f9674733f HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,652] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2b1b2d628b8ff9f553b2fe2aebe66821 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,653] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-79ec52e0ad0bca20a1ef9fd052f72829 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:14:59,696] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:14:59] “GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-2b1b2d628b8ff9f553b2fe2aebe66821 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:15:00,096] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:15:00] “POST /v1/conversation/ask HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:15:00,854] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:15:00] “POST /v1/conversation/related_questions HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:15:06,277] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:15:06] “GET /v1/document/thumbnails?doc_ids=d3f5da08acf111efa6b1fc3497b12dc4 HTTP/1.1” 200 -</p>
<p>POST /v1/chunk/retrieval_test HTTP/1.1   -&gt; 检索文档</p>
<p>POST /v1/conversation/ask HTTP/1.1   -&gt; 问答</p>
<p>POST /v1/conversation/related_questions HTTP/1.1   -&gt; 相关问题</p>
<h3 id="创造一个Assistant"><a href="#创造一个Assistant" class="headerlink" title="创造一个Assistant"></a>创造一个Assistant</h3><p>[INFO] [2024-11-28 03:26:57,145] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:57] “GET /v1/document/thumbnails?doc_ids=d3f5da08acf111efa6b1fc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:26:57,146] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:57] “GET /v1/document/thumbnails?doc_ids=de6cf8f4acf111efad6afc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:26:57,146] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:57] “GET /v1/document/thumbnails?doc_ids=d3f5da08acf111efa6b1fc3497b12dc4&amp;doc_ids=de6cf8f4acf111efad6afc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:26:57,146] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:57] “GET /v1/user/info HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:26:59,893] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:59] “GET /v1/user/tenant_info HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:26:59,898] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:59] “GET /v1/kb/list HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:26:59,898] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:59] “GET /v1/dialog/get?dialog_id=e72470c8acf411efa17afc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:26:59,911] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:26:59] “GET /v1/llm/list HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:27:07,021] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:27:07] “POST /v1/dialog/set HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:27:07,090] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:27:07] “GET /v1/dialog/get?dialog_id=e72470c8acf411efa17afc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:27:07,092] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:27:07] “GET /v1/dialog/list HTTP/1.1” 200 -</p>
<h3 id="一次聊天（Chat）"><a href="#一次聊天（Chat）" class="headerlink" title="一次聊天（Chat）"></a>一次聊天（Chat）</h3><p>[INFO] [2024-11-28 03:34:17,691] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:17] “GET /v1/user/info HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:34:24,071] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:24] “GET /v1/user/info HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:34:29,104] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:29] “POST /v1/conversation/set HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:34:29,149] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:29] “GET /v1/conversation/list?dialog_id=96e0e1c2acf511ef85d0fc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:34:30,055] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:30] “POST /v1/conversation/completion HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:34:33,446] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:33] “GET /v1/user/info HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:34:37,798] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:37] “GET /v1/document/thumbnails?doc_ids=d3f5da08acf111efa6b1fc3497b12dc4 HTTP/1.1” 200 -<br>[INFO] [2024-11-28 03:34:37,864] [_internal._log] [line:97]: 127.0.0.1 - - [28/Nov/2024 03:34:37] “GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-thumbnail_d3f5da08acf111efa6b1fc3497b12dc4.png HTTP/1.1” 200 - </p>
<p>POST /v1/conversation/set HTTP/1.1  -&gt; 会话开始   使用request.json解析请求数据，结合ConversationService和DialogService实现创建新会话或更新已有会话内容</p>
<p>GET /v1/conversation/list   -&gt; 会话列表   利用DocumentService获取文档信息，调用retrievaler.search执行检索并返回文档块及高亮内容</p>
<p>POST /v1/conversation/completion HTTP/1.1  -&gt; 会话完成  基于ConversationService获取会话数据，结合chat函数生成回复，支持流式返回或单次响应</p>
<p>GET /v1/document/thumbnails</p>
<p>GET /v1/document/image</p>
<h3 id="相关文本："><a href="#相关文本：" class="headerlink" title="相关文本："></a>相关文本：</h3><p>[INFO] [2024-11-29 06:49:03,376] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:03] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-b6b54a6e86b8309ed1ac072f9674733f HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:03,386] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:03] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-79ec52e0ad0bca20a1ef9fd052f72829 HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:03,386] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:03] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-c40a288b0e9cc26a11fee58744f1df42 HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:03,388] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:03] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2332919d98b45e91e670d3e57f2423da HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:03,389] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:03] “GET /v1/user/info HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:03,390] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:03] “GET /v1/kb/list HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:03,397] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:03] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2b1b2d628b8ff9f553b2fe2aebe66821 HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:04,992] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:04] “POST /v1/conversation/ask HTTP/1.1” 200 -   -&gt; 大模型问答<br>[INFO] [2024-11-29 06:49:05,252] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:05] “POST /v1/chunk/retrieval_test HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:05,308] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:05] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-c40a288b0e9cc26a11fee58744f1df42 HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:05,309] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:05] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2b1b2d628b8ff9f553b2fe2aebe66821 HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:05,313] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:05] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2332919d98b45e91e670d3e57f2423da HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:05,313] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:05] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-79ec52e0ad0bca20a1ef9fd052f72829 HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:05,314] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:05] “GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-b6b54a6e86b8309ed1ac072f9674733f HTTP/1.1” 200 -<br>[INFO] [2024-11-29 06:49:10,300] [_internal._log] [line:97]: 127.0.0.1 - - [29/Nov/2024 06:49:10] “POST /v1/conversation/related_questions HTTP/1.1” 200 -</p>
<p>POST /v1/conversation/ask HTTP/1.1    -&gt; 大模型问答</p>
<p>POST /v1/chunk/retrieval_test HTTP/1.1  -&gt; 检索</p>
<p>POST /v1/conversation/related_questions HTTP/1.1  -&gt; 相关问题</p>
<p>/set：使用request.json解析请求数据，结合ConversationService和DialogService实现创建新会话或更新已有会话内容。</p>
<p>/completion：基于ConversationService获取会话数据，结合chat函数生成回复，支持流式返回或单次响应。</p>
<p>/list：利用DocumentService获取文档信息，调用retrievaler.search执行检索并返回文档块及高亮内容。</p>
<p>/related_questions：通过LLMBundle调用语言模型，根据用户关键词生成相关搜索词并使用正则表达式清理返回结果</p>
<h3 id="相关文档："><a href="#相关文档：" class="headerlink" title="相关文档："></a>相关文档：</h3><p>POST /v1/chunk/retrieval_test<br>GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-79ec52e0ad0bca20a1ef9fd052f72829<br>GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-b6b54a6e86b8309ed1ac072f9674733f<br>GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-c40a288b0e9cc26a11fee58744f1df42<br>GET /v1/document/image/4e8bdc42ac2811ef820f0242ac120006-2332919d98b45e91e670d3e57f2423da<br>GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-c40a288b0e9cc26a11fee58744f1df42<br>GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2332919d98b45e91e670d3e57f2423da<br>GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-b6b54a6e86b8309ed1ac072f9674733f<br>GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-2b1b2d628b8ff9f553b2fe2aebe66821<br>GET /v1/document/thumbnails?doc_ids=4e8bdc42ac2811ef820f0242ac120006-79ec52e0ad0bca20a1ef9fd052f72829</p>
<h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><p>Umi.js 框架：Umi 是一个可插拔的企业级 React 应用框架。它提供了类 Next.js 的约定式路由，以及各种插件用于构建功能强大的单页应用。</p>
<p>通常开发目录结构如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── dist/                       # 构建产物目录</span><br><span class="line">├── mock/                       # 本地模拟数据</span><br><span class="line">├── public/                     # 静态资源</span><br><span class="line">├── config/                     # 配置文件</span><br><span class="line">├── src/                        # 源码目录</span><br><span class="line">│   ├── assets/                 # 本地静态资源</span><br><span class="line">│   ├── components/             # 业务通用组件</span><br><span class="line">│   ├── layouts/                # 通用布局</span><br><span class="line">│   ├── models/                 # dva model</span><br><span class="line">│   ├── pages/                  # 页面目录，里面的文件即路由</span><br><span class="line">│   ├── services/               # 后台接口服务</span><br><span class="line">│   ├── utils/                  # 工具库</span><br><span class="line">│   ├── global.less             # 全局样式</span><br><span class="line">│   ├── global.tsx              # 全局 JS</span><br><span class="line">├── tests/                      # 测试工具</span><br><span class="line">├── .umirc.ts                   # umi 配置</span><br><span class="line">├── package.json                # 项目信息</span><br><span class="line">├── node_modules/               # 依赖包</span><br><span class="line">└── README.md                   # 项目说明</span><br></pre></td></tr></table></figure>
<h3 id="nohup-后台运行"><a href="#nohup-后台运行" class="headerlink" title="nohup 后台运行"></a>nohup 后台运行</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup npm run dev &gt; dev-output.log 2&gt;&amp;1 &amp; echo $! &gt; dev-pid.txt</span><br><span class="line">nohup bash docker/entrypoint.sh &gt; docker/output.log 2&gt;&amp;1 &amp; echo $! &gt; docker/pid.txt</span><br></pre></td></tr></table></figure>
<h3 id="Umi-入门指南"><a href="#Umi-入门指南" class="headerlink" title="Umi 入门指南"></a>Umi 入门指南</h3>
                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2024/10/21/就业准备/" data-toggle="tooltip" data-placement="top" title="就业准备">&larr; Previous Post
		<br>
		<span><font size="2" face="Calibri" color="grey">就业准备</font></span>
	       </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2024/08/30/大四下总结/" data-toggle="tooltip" data-placement="top" title="大四下总结">Next Post &rarr;
		<br>
		<span><font size="2" face="Calibri" color="grey">大四下总结</font></span>
	        </a>
                    </li>
                    
                </ul>

                <!-- tip start -->
                

                
                <div class="comment_notes">
                    <p>
                        by Tan
                    </p>
                </div>
                
                <!-- tip end -->

                <!-- Music start-->
                
                <!-- Music end -->

                <!-- Sharing -->
                
                <!-- Sharing -->

                <!-- gitment start -->
                
                <!-- gitment end -->

                <!-- 来必力City版安装代码 -->
                
                <!-- City版安装代码已完成 -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      
        <aside id="sidebar">
          <div id="toc" class="toc-article">
          <strong class="toc-title">Contents</strong>
          
            
              <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#论文查询"><span class="toc-nav-text">论文查询</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#论文"><span class="toc-nav-text">论文</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#盾构隧道施工与分析"><span class="toc-nav-text">盾构隧道施工与分析</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#AI在盾构隧道中的应用-—-Prediction"><span class="toc-nav-text">AI在盾构隧道中的应用 — Prediction</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#PDF-提取文字-amp-图片"><span class="toc-nav-text">PDF 提取文字 &amp; 图片</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#要求"><span class="toc-nav-text">要求</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#设计"><span class="toc-nav-text">设计</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#项目结构"><span class="toc-nav-text">项目结构</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#问题"><span class="toc-nav-text">问题</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#调研进展汇报-PDF-文字与图片提取方法"><span class="toc-nav-text">调研进展汇报 - PDF 文字与图片提取方法</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-PDF标准文件的处理："><span class="toc-nav-text">1. PDF标准文件的处理：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-图片形式的PDF处理："><span class="toc-nav-text">2. 图片形式的PDF处理：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#未来方向"><span class="toc-nav-text">未来方向</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#问题-1"><span class="toc-nav-text">问题</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#RAG（Retrieval-augmented-Generation，检索增强生成）"><span class="toc-nav-text">RAG（Retrieval-augmented Generation，检索增强生成）</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#只需要其中的检索-匹配步骤"><span class="toc-nav-text">只需要其中的检索&#x2F;匹配步骤</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#部署-RAGFlow"><span class="toc-nav-text">部署 RAGFlow</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#docker-换源"><span class="toc-nav-text">docker 换源</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#安装python3-12"><span class="toc-nav-text">安装python3.12</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#安装poerty"><span class="toc-nav-text">安装poerty</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#poetry-安装环境"><span class="toc-nav-text">poetry 安装环境</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#pyproject-toml-文件"><span class="toc-nav-text">pyproject.toml 文件</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#添加清华源"><span class="toc-nav-text">添加清华源</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#poetry-环境安装中遇到的问题"><span class="toc-nav-text">poetry 环境安装中遇到的问题</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#无法访问huggingface-co"><span class="toc-nav-text">无法访问huggingface.co</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#yml文件自动复制"><span class="toc-nav-text">yml文件自动复制</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#后端端口报错"><span class="toc-nav-text">后端端口报错</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#报错nltk无法download"><span class="toc-nav-text">报错nltk无法download</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#报错没有redis："><span class="toc-nav-text">报错没有redis：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Q"><span class="toc-nav-text">Q</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#项目结构-1"><span class="toc-nav-text">项目结构</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#业务修改流程"><span class="toc-nav-text">业务修改流程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#一次搜索（Search）"><span class="toc-nav-text">一次搜索（Search）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#创造一个Assistant"><span class="toc-nav-text">创造一个Assistant</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#一次聊天（Chat）"><span class="toc-nav-text">一次聊天（Chat）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#相关文本："><span class="toc-nav-text">相关文本：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#相关文档："><span class="toc-nav-text">相关文档：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#前端"><span class="toc-nav-text">前端</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#nohup-后台运行"><span class="toc-nav-text">nohup 后台运行</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Umi-入门指南"><span class="toc-nav-text">Umi 入门指南</span></a></li></ol></li></ol>
            
          
          </div>
        </aside>
      
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                    </div>
                </section>
                

            </div>
			
			<div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">
				
				<br>
				<br>

				<script src="https://utteranc.es/client.js"
						repo="Master-Tan/Master-Tan.github.io"
						issue-term="pathname"
						label="Comment"
						theme="github-light"
						crossorigin="anonymous"
						async>
				</script>
			</div>
        </div>
    </div>
</article>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>


<style  type="text/css">
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                
                    <li>
                        <a target="_blank"  href="https://github.com/Master-Tan">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://twitter.com/None">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/None">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Tan 2025 | Powered by 
                    <a href="https://github.com/Master-Tan/Master-Tan.github.io" target="_blank" rel="noopener">
                        <i>Tan's Blog</i>
                    </a>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://master-tan.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&quot;Sunny&quot;, &quot;💖&quot;, &quot;Sunny&quot;, &quot;🧡&quot;, &quot;Sunny&quot;, &quot;💛&quot;, &quot;Sunny&quot; , &quot;💚&quot;, &quot;Sunny&quot;, &quot;💙&quot;, &quot;Sunny&quot;, &quot;💜&quot;, &quot;Sunny&quot;, &quot;😍&quot;]' color='[&quot;rgb(255, 0, 0)&quot; ,&quot;rgb(255, 0, 0)&quot; ,&quot;rgb(255, 125, 0)&quot; ,&quot;rgb(255, 125, 0)&quot; ,&quot;rgb(255, 255, 0)&quot; ,&quot;rgb(255, 255, 0)&quot; ,&quot;rgb(0, 255, 0)&quot; ,&quot;rgb(0, 255, 0)&quot; ,&quot;rgb(0, 255, 255)&quot; ,&quot;rgb(0, 255, 255)&quot; ,&quot;rgb(0, 0, 255)&quot; ,&quot;rgb(0, 0, 255)&quot; ,&quot;rgb(255, 0, 255)&quot; ,&quot;rgb(255, 0, 255)&quot;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
